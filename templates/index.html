<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grades</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="banner">
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="logo">
        <nav class="nav-links">
            <a href="{{ url_for('update_scores') }}">Update Scores</a>
            <a href="{{ url_for('electives') }}">Choose Electives</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </nav>
    </div>

    <div class="intro-container">
        <div class="welcome-section">
            <h2>Welcome, {{ username }}</h2>
            <h3>Economics, Finance and Data Science</h3>
            <h3>{{ user_year }}</h3>
        </div>

        <div class="overview-table">
            <h1>Overview</h1>
        <table border="1">
            <tr>
                <th>Year</th>
                <th>Weight (%)</th>
                <th>Current Score</th>
                <th>Current Grade</th>
                <th>Total Score</th>
                <th>Total Grade</th>
            </tr>
            {% for row in Overview %}
            <tr>
                {% for item in row %}
                    <td>{{ item }}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </table>
        </div>
    </div>


    {% if one_count > 0 %}
        <div class="table-section">
            <div class="header-container">
                <h1>Year 1</h1>
                <form action="{{ url_for('min_score', year='1') }}" method="POST" class="target-score-form">
                    <label for="target_score" class="tooltip-label" data-toggle="tooltip" title="Set your target score for the modules in Year 1">Set Target Score:</label>
                    <input type="number" id="target_score" name="target_score" required>
                </form>
            </div>
            <table border="1">
                <tr>
                    <th>Module</th>
                    <th>Credits</th>
                    <th>Exam 1</th>
                    <th>Exam 2</th>
                    <th>Exam 3</th>
                    <th>Exam 4</th>
                    <th>Current Grade</th>
                    <th>Total Grade</th>
                    <th>Min Score</th>
                </tr>
                {% for row in Year_1 %}
                <tr>
                    <td>{{ row[0] }}</td> 
                    <td>{{ row[1] }}</td> 
                    <td>{{ row[3] }} {{ row[4] }} {% if row[2] %}
                        <span style="font-size: 0.8em; color: gray;"> ({{ row[2] }}%)</span>
                    {% endif %}</td> 
                    <td>{{ row[6] }}  {{ row[7] }} {% if row[5] %}
                        <span style="font-size: 0.8em; color: gray;"> ({{ row[5] }}%)</span>
                    {% endif %}</td> 
                    <td>{{ row[9] }} {{ row[10] }} {% if row[8] %}
                        <span style="font-size: 0.8em; color: gray;"> ({{ row[8] }}%)</span>
                    {% endif %}</td> 
                    <td>{{ row[12] }} {{ row[13] }} {% if row[11] %}
                        <span style="font-size: 0.8em; color: gray;"> ({{ row[11] }}%)</span>
                    {% endif %}</td> 
                    <td>{{ row[14] }} {{ row[15] }}</td> 
                    <td>{{ row[16] }} {{ row[17] }}</td>
                    <td>{% if row[18] != "" %}{{ row[18] | float | round(1) }}{% else %}{{ row[18] }}{% endif %}</td>
                </tr>
                {% endfor %}
            </table>
            <p>Total Modules: {{ one_count }}</p>
        </div>
    {% endif %}

    {% if two_count > 0 %}
        <div class="table-section">
            <div class="header-container">
                <h1>Year 2</h1>
                <form action="{{ url_for('min_score', year='2') }}" method="POST" class="target-score-form">
                    <label for="target_score" class="tooltip-label" data-toggle="tooltip" title="Set your target score for the modules in Year 2">Set Target Score:</label>
                    <input type="number" id="target_score" name="target_score" required>
                </form>
            </div>
            <table border="1">
                <tr>
                    <th>Module</th>
                    <th>Credits</th>
                    <th>Exam 1</th>
                    <th>Exam 2</th>
                    <th>Exam 3</th>
                    <th>Exam 4</th>
                    <th>Current Grade</th>
                    <th>Total Grade</th>
                    <th>Min Score</th>
                </tr>
                {% for row in Year_2 %}
                <tr>
                    <td>{{ row[0] }}</td> 
                    <td>{{ row[1] }}</td> 
                    <td>{{ row[3] }} {{ row[4] }} {% if row[2] %}
                        <span style="font-size: 0.8em; color: gray;"> ({{ row[2] }}%)</span>
                    {% endif %}</td> 
                    <td>{{ row[6] }}  {{ row[7] }} {% if row[5] %}
                        <span style="font-size: 0.8em; color: gray;"> ({{ row[5] }}%)</span>
                    {% endif %}</td> 
                    <td>{{ row[9] }} {{ row[10] }} {% if row[8] %}
                        <span style="font-size: 0.8em; color: gray;"> ({{ row[8] }}%)</span>
                    {% endif %}</td> 
                    <td>{{ row[12] }} {{ row[13] }} {% if row[11] %}
                        <span style="font-size: 0.8em; color: gray;"> ({{ row[11] }}%)</span>
                    {% endif %}</td> 
                    <td>{{ row[14] }} {{ row[15] }}</td> 
                    <td>{{ row[16] }} {{ row[17] }}</td>
                    <td>{% if row[18] != "" %}{{ row[18] | float | round(1) }}{% else %}{{ row[18] }}{% endif %}</td>
                </tr>
                {% endfor %}
            </table>
            <p>Total Modules: {{ two_count }}</p>

        </div>
    {% endif %}

    {% if three_count > 0 %}
        <div class="table-section">
            <div class="header-container">
                <h1>Year 3</h1>
                <form action="{{ url_for('min_score', year='3') }}" method="POST" class="target-score-form">
                    <label for="target_score" class="tooltip-label" data-toggle="tooltip" title="Set your target score for the modules in Year 3">Set Target Score:</label>
                    <input type="number" id="target_score" name="target_score" required>
                </form>
            </div>
            <table border="1">
                <tr>
                    <th>Module</th>
                    <th>Credits</th>
                    <th>Exam 1</th>
                    <th>Exam 2</th>
                    <th>Exam 3</th>
                    <th>Current Grade</th>
                    <th>Total Grade</th>
                    <th>Min Score</th>
                </tr>
                {% for row in Year_3 %}
                <tr>
                    <td>{{ row[0] }}</td> 
                    <td>{{ row[1] }}</td> 
                    <td>{{ row[3] }} {{ row[4] }} {% if row[2] %}
                        <span style="font-size: 0.8em; color: gray;"> ({{ row[2] }}%)</span>
                    {% endif %}</td> 
                    <td>{{ row[6] }}  {{ row[7] }} {% if row[5] %}
                        <span style="font-size: 0.8em; color: gray;"> ({{ row[5] }}%)</span>
                    {% endif %}</td> 
                    <td>{{ row[9] }} {{ row[10] }} {% if row[8] %}
                        <span style="font-size: 0.8em; color: gray;"> ({{ row[8] }}%)</span>
                    {% endif %}</td> 
                    <td>{{ row[14] }} {{ row[15] }}</td> 
                    <td>{{ row[16] }} {{ row[17] }}</td>
                    <td>{% if row[18] != "" %}{{ row[18] | float | round(1) }}{% else %}{{ row[18] }}{% endif %}</td>
                </tr>
                {% endfor %}
            </table>
            <p>Total Modules: {{ three_count }}</p>

        </div>
    {% endif %}

    <div class="outro-banner">
        <div class="outro-content">
            <div class="left-side">
                <p>Made by Sofia Hueffer <span class="separator">|</span> All Rights Reserved</p>
                <p>For any suggestions or issues, please contact </p>
            </div>
            <div class="right-side">
            <p>Email: <a href="smhueffer@egmail.com">smhueffer@gmail.com</a></p>
            <p>Phone: <a href="tel:07484254531">07484254531</a></p>
        </div>
    </div>

</body>
</html>